# Task 1.1: Create catalog.yaml

## Status: [ ] Not Started

## ‚ö†Ô∏è AWARENESS
**LEGGI PRIMA**: `docs/TASKS/CONTEXT.md`

**Perch√© serve questo file se esiste gi√† `catalog.py`?**
1. `catalog.py` copre SOLO Copernicus Marine (8 prodotti)
2. **Manca latency metadata** - fondamentale per multi-sensor
3. **Mancano** ERA5, NOAA, NASA CYGNSS, ESA CCI
4. Intake YAML √® standard Pangeo (interoperabilit√†)

## Goal
Creare Intake catalog come **index multi-provider** con latency metadata.

## Output File
`catalog.yaml` (project root)

## Dependencies
- `pip install intake intake-xarray` (gi√† in .venv)

## Code

```yaml
# catalog.yaml - Multi-provider catalog con latency metadata
# COMPLEMENTA (non sostituisce) src/data_manager/catalog.py
metadata:
  title: Surge Shazam Multi-Sensor Catalog
  version: "1.0"
  note: "Estende CopernicusCatalog con ERA5, NOAA, NASA, ESA"

sources:
  # === COPERNICUS MARINE (delegato a catalog.py esistente) ===
  cmems_sealevel:
    driver: intake_xarray.netcdf.NetCDFSource
    description: "CMEMS Sea Level L4 (via CopernicusCatalog)"
    metadata:
      provider: Copernicus Marine
      product_id: "SEALEVEL_GLO_PHY_L4_NRT_008_046"  # Link a catalog.py
      variables: [sla, adt, ugos, vgos]
      latency: "~1d"
      latency_badge: "üü°"
      client: "src.data_manager.catalog.CopernicusCatalog"
      status: available

  cmems_sst:
    driver: intake_xarray.netcdf.NetCDFSource
    description: "CMEMS SST OSTIA (via CopernicusCatalog)"
    metadata:
      provider: Copernicus Marine
      product_id: "SST_GLO_SST_L4_NRT_OBSERVATIONS_010_001"
      variables: [analysed_sst, analysis_error]
      latency: "~1d"
      latency_badge: "üü°"
      client: "src.data_manager.catalog.CopernicusCatalog"
      status: available

  # === ERA5 (client esistente) ===
  era5_reanalysis:
    driver: intake_xarray.netcdf.NetCDFSource
    description: "ERA5 Reanalysis - ECMWF"
    metadata:
      provider: ECMWF
      variables: [temperature, precipitation, wind_u, wind_v, pressure, runoff]
      latency: "~5d"
      latency_badge: "üî¥"
      client: "src.surge_shazam.data.era5_client"
      status: available
    args:
      urlpath: "data/era5/*.nc"

  # === NOAA CLIMATE INDICES (client esistente) ===
  noaa_climate_indices:
    driver: csv
    description: "NOAA Climate Teleconnection Indices"
    metadata:
      provider: NOAA
      variables: [NAO, AO, ENSO, AMO, PDO]
      latency: "~1mo"
      latency_badge: "üî¥"
      client: "src.surge_shazam.data.climate_indices"
      status: available
    args:
      urlpath: "https://www.cpc.ncep.noaa.gov/products/precip/CWlink/pna/norm.nao.monthly.b5001.current.ascii"

  # === ESA CCI (file locali) ===
  slcci_altimetry:
    driver: intake_xarray.netcdf.NetCDFSource
    description: "ESA Sea Level CCI"
    metadata:
      provider: ESA CCI
      variables: [corssh, mean_sea_surface]
      latency: "historical"
      latency_badge: "‚ö´"
      status: available
    args:
      urlpath: "data/slcci/*.nc"

  # === NASA CYGNSS (da implementare - Task 2.1) ===
  cygnss_wind:
    driver: intake_xarray.netcdf.NetCDFSource
    description: "CYGNSS Wind Speed (NASA PO.DAAC)"
    metadata:
      provider: NASA
      variables: [wind_speed, wind_speed_uncertainty]
      latency: "2-24h"
      latency_badge: "üü¢"  # Near real-time!
      auth_env: "NASA_EARTHDATA_TOKEN"
      client: "src.surge_shazam.data.cygnss_client"
      status: to_implement
      priority: HIGH
```

## Test Command
```bash
source .venv/bin/activate
python -c "import intake; cat = intake.open_catalog('catalog.yaml'); print(list(cat))"
```

## Done Criteria
- [ ] File exists at `catalog.yaml`
- [ ] Test prints: `['cmems_sealevel', 'cmems_sst', 'era5_reanalysis', 'noaa_climate_indices', 'slcci_altimetry', 'cygnss_wind']`
- [ ] Ogni source ha `latency_badge`

## Next Task
‚Üí 1.2_catalog_loader.md
