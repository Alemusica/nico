/* =====================================================
   ðŸŽ¨ SWISS DESIGN SYSTEM - Causal Discovery Dashboard
   Blue Emerald Oceanography Theme
   ===================================================== */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* =====================================================
   BASE STYLES
   ===================================================== */

@layer base {
  :root {
    /* PHI-based spacing scale */
    --phi: 1.618;
    --space-unit: 8px;
    
    /* Color tokens */
    --color-ocean-deep: #1e3a8a;
    --color-ocean-mid: #2563eb;
    --color-ocean-surface: #06b6d4;
    --color-ocean-foam: #ecfdf5;
    --color-emerald: #059669;
    
    /* Typography */
    --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
    --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
  }

  html {
    font-family: var(--font-sans);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    @apply bg-slate-50 text-slate-900;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }

  /* Typography defaults */
  h1, h2, h3, h4, h5, h6 {
    @apply font-display font-semibold tracking-tight;
  }

  h1 { @apply text-phi-4xl; }
  h2 { @apply text-phi-3xl; }
  h3 { @apply text-phi-2xl; }
  h4 { @apply text-phi-xl; }
  h5 { @apply text-phi-lg; }
  h6 { @apply text-phi-base font-medium; }

  /* Focus styles */
  :focus-visible {
    @apply outline-none ring-2 ring-blue-500 ring-offset-2;
  }

  /* Selection */
  ::selection {
    @apply bg-blue-500/20 text-blue-900;
  }
}

/* =====================================================
   COMPONENT STYLES
   ===================================================== */

@layer components {
  /* Swiss Card */
  .card {
    @apply bg-white rounded-swiss-lg shadow-swiss border border-slate-200/60;
  }

  .card-header {
    @apply px-phi-xl py-phi-lg border-b border-slate-100;
  }

  .card-body {
    @apply px-phi-xl py-phi-lg;
  }

  /* Swiss Button */
  .btn {
    @apply inline-flex items-center justify-center gap-phi-sm
           px-phi-lg py-phi-md
           font-medium text-phi-sm
           rounded-swiss
           transition-all duration-150
           focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
  }

  .btn-primary {
    @apply bg-blue-500 text-white
           hover:bg-blue-600 active:bg-blue-700
           focus-visible:ring-blue-500
           shadow-swiss hover:shadow-swiss-lg;
  }

  .btn-secondary {
    @apply bg-emerald-600 text-white
           hover:bg-emerald-700 active:bg-emerald-800
           focus-visible:ring-emerald-500;
  }

  .btn-outline {
    @apply border border-slate-300 bg-white text-slate-700
           hover:bg-slate-50 hover:border-slate-400
           focus-visible:ring-slate-400;
  }

  .btn-ghost {
    @apply text-slate-600 hover:bg-slate-100 hover:text-slate-900;
  }

  .btn-sm {
    @apply px-phi-md py-phi-xs text-phi-xs;
  }

  .btn-lg {
    @apply px-phi-xl py-phi-lg text-phi-base;
  }

  /* Swiss Input */
  .input {
    @apply w-full px-phi-md py-phi-sm
           bg-white border border-slate-300
           rounded-swiss text-phi-sm
           placeholder:text-slate-400
           focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500
           transition-colors duration-150;
  }

  .input-error {
    @apply border-red-500 focus:ring-red-500/20 focus:border-red-500;
  }

  /* Swiss Label */
  .label {
    @apply block text-phi-sm font-medium text-slate-700 mb-phi-xs;
  }

  /* Swiss Badge */
  .badge {
    @apply inline-flex items-center px-phi-sm py-0.5
           text-phi-xs font-medium
           rounded-full;
  }

  .badge-blue {
    @apply bg-blue-100 text-blue-700;
  }

  .badge-emerald {
    @apply bg-emerald-100 text-emerald-700;
  }

  .badge-slate {
    @apply bg-slate-100 text-slate-600;
  }

  .badge-red {
    @apply bg-red-100 text-red-700;
  }

  /* Swiss Sidebar */
  .sidebar {
    @apply fixed left-0 top-0 bottom-0 w-[280px]
           bg-slate-900 text-slate-100
           z-sidebar overflow-y-auto;
  }

  .sidebar-item {
    @apply flex items-center gap-phi-md
           px-phi-lg py-phi-md
           text-phi-sm text-slate-300
           hover:bg-slate-800 hover:text-white
           rounded-swiss-sm
           transition-colors duration-150;
  }

  .sidebar-item-active {
    @apply bg-blue-500/20 text-blue-400
           border-l-2 border-blue-500;
  }

  /* Swiss Header */
  .header {
    @apply h-16 bg-white border-b border-slate-200
           flex items-center px-phi-xl
           z-header;
  }

  /* Data Grid */
  .data-grid {
    @apply w-full text-phi-sm;
  }

  .data-grid th {
    @apply px-phi-md py-phi-sm text-left
           text-phi-xs font-semibold text-slate-500 uppercase tracking-wider
           bg-slate-50 border-b border-slate-200;
  }

  .data-grid td {
    @apply px-phi-md py-phi-sm
           border-b border-slate-100;
  }

  .data-grid tr:hover td {
    @apply bg-slate-50;
  }

  /* Graph Container */
  .graph-container {
    @apply relative w-full h-full min-h-[400px]
           bg-slate-900 rounded-swiss-lg overflow-hidden;
  }

  .graph-node {
    @apply cursor-pointer;
  }

  .graph-link {
    fill: none;
    stroke-linecap: round;
  }

  /* Causal Link Colors */
  .link-strong { stroke: theme('colors.emerald.500'); }
  .link-moderate { stroke: theme('colors.blue.500'); }
  .link-weak { stroke: theme('colors.slate.400'); }
  .link-negative { stroke: theme('colors.red.500'); }

  /* Chat Panel */
  .chat-container {
    @apply flex flex-col h-full bg-white rounded-swiss-lg border border-slate-200;
  }

  .chat-messages {
    @apply flex-1 overflow-y-auto p-phi-lg space-y-phi-md;
  }

  .chat-message {
    @apply max-w-[80%] rounded-swiss-lg px-phi-md py-phi-sm;
  }

  .chat-message-user {
    @apply ml-auto bg-blue-500 text-white;
  }

  .chat-message-assistant {
    @apply mr-auto bg-slate-100 text-slate-900;
  }

  .chat-input-container {
    @apply flex gap-phi-sm p-phi-md border-t border-slate-200;
  }

  /* Knowledge Panel */
  .knowledge-card {
    @apply p-phi-lg bg-gradient-to-br from-slate-50 to-slate-100
           border border-slate-200 rounded-swiss-lg
           hover:shadow-swiss-lg hover:border-slate-300
           transition-all duration-200;
  }

  /* Loading States */
  .skeleton {
    @apply animate-pulse bg-slate-200 rounded;
  }

  .spinner {
    @apply w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin;
  }

  /* Status Indicators */
  .status-dot {
    @apply w-2 h-2 rounded-full;
  }

  .status-connected {
    @apply bg-emerald-500;
  }

  .status-disconnected {
    @apply bg-red-500;
  }

  .status-pending {
    @apply bg-amber-500 animate-pulse;
  }

  /* Tooltips */
  .tooltip {
    @apply absolute z-tooltip px-phi-sm py-phi-xs
           text-phi-xs text-white bg-slate-800
           rounded shadow-lg
           opacity-0 pointer-events-none
           transition-opacity duration-150;
  }

  .tooltip-visible {
    @apply opacity-100;
  }
}

/* =====================================================
   UTILITY STYLES
   ===================================================== */

@layer utilities {
  /* Swiss Grid */
  .swiss-grid {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: theme('spacing.phi-lg');
  }

  /* PHI Container */
  .phi-container {
    max-width: calc(1440px / var(--phi));
    margin: 0 auto;
    padding: 0 theme('spacing.phi-xl');
  }

  /* Text Gradient */
  .text-gradient-ocean {
    @apply bg-clip-text text-transparent
           bg-gradient-to-r from-blue-500 to-emerald-500;
  }

  /* Glass Effect */
  .glass {
    @apply bg-white/80 backdrop-blur-sm;
  }

  /* No scrollbar */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Custom scrollbar */
  .swiss-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.slate.300') transparent;
  }

  .swiss-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .swiss-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .swiss-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-slate-300 rounded-full;
  }

  .swiss-scrollbar::-webkit-scrollbar-thumb:hover {
    @apply bg-slate-400;
  }

  /* Truncate lines */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* =====================================================
   D3 GRAPH SPECIFIC STYLES
   ===================================================== */

.graph-svg {
  width: 100%;
  height: 100%;
}

.graph-svg .node circle {
  transition: r 0.2s ease, fill 0.2s ease;
}

.graph-svg .node circle:hover {
  r: 12;
}

.graph-svg .node text {
  font-family: var(--font-sans);
  font-size: 11px;
  font-weight: 500;
  fill: #f8fafc;
  text-anchor: middle;
  pointer-events: none;
}

.graph-svg .link {
  stroke-opacity: 0.6;
  transition: stroke-opacity 0.2s ease, stroke-width 0.2s ease;
}

.graph-svg .link:hover {
  stroke-opacity: 1;
  stroke-width: 3;
}

.graph-svg .link-label {
  font-family: var(--font-mono);
  font-size: 9px;
  fill: #94a3b8;
}

/* Arrowhead markers */
.graph-svg marker path {
  fill: currentColor;
}

